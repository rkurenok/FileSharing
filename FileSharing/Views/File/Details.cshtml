@model FileSharing.Models.File

@{
    ViewBag.Title = "Детали файла";
    string text = "Если файл имеет тип доступа \"Закрытый\", то доступ к этому файлу имеете только вы в своем профиле, а если файл имеет тип доступа \"Открытый\", то доступ к нему имеют все пользователи во вкладке \"Файлы\"";
}

<br />
<div class="container">
    <h2 id="headerId">Детали файла</h2>
</div>
<br />
<br />


<div style="margin:0 auto;">
    <div id="fileDetails" class="text-center" style=" margin: auto;">
        <br />
        <div>
            <dl class="row">
                <dt class="col-md-6">
                    @Html.DisplayNameFor(model => model.Name)
                </dt>

                <dd class="col-md-6">
                    @Html.DisplayFor(model => model.Name)
                </dd>
            </dl>
            <dl class="row">
                <dt class="col-md-6">
                    @Html.DisplayNameFor(model => model.SizeInBytes)
                </dt>

                <dd class="col-md-6">
                    @{
                        string size = string.Format("{0} Б", Model.SizeInBytes);
                        double sizeInKBytes, sizeInMBytes, sizeInGBytes;
                        if (Model.SizeInBytes >= 1024)
                        {
                            sizeInKBytes = (double)Model.SizeInBytes / 1024;
                            size = string.Format("{0:N2} КБ", sizeInKBytes);
                            if (sizeInKBytes >= 1024)
                            {
                                sizeInMBytes = (double)sizeInKBytes / 1024;
                                size = string.Format("{0:N2} МБ", sizeInMBytes);
                                if (sizeInMBytes >= 1024)
                                {
                                    sizeInGBytes = (double)sizeInMBytes / 1024;
                                    size = string.Format("{0:N2} ГБ", sizeInGBytes);
                                }
                            }
                        }
                    }
                    @size
                </dd>
            </dl>
            <dl class="row">
                <dt class="col-md-6">
                    Автор
                </dt>

                <dd class="col-md-6">
                    @Html.DisplayFor(model => model.User.Login)
                </dd>
            </dl>
            @if (User.Identity.Name == Model.User.Login)
            {
                <dl class="row">
                    <dt class="col-md-6">
                        Доступ к файлу
                    </dt>

                    <dd class="col-md-6">
                        @(Model.AccessId == 1 ? "Закрытый" : "Открытый")
                        <span id="btn-tooltip" style="font-size: 100%" class="glyphicon glyphicon-question-sign btn-secondary" data-toggle="tooltip" data-placement="right" title="@text"></span>
                    </dd>

                </dl>
                <dl class="row">
                    <dt class="col-md-6">
                        @Html.ActionLink("Скачать", "Download", new { fileId = Model.Id }, htmlAttributes: new { @class = "btn btn-success", @style = "min-width: 219px" })
                    </dt>

                    <dd class="col-md-6">

                        @Html.ActionLink("Изменить", "EditFile", "Manage", new { fileId = Model.Id }, htmlAttributes: new { @class = "btn btn-primary", @style = "min-width: 219px" })
                    </dd>
                </dl>
                <div class="row"><br /></div>
                <dl class="row">
                    <dt class="col-md-6">
                        @Html.ActionLink("Удалить", "Delete", new { fileId = Model.Id }, htmlAttributes: new { @class = "btn btn-danger", @style = "min-width: 219px" })
                    </dt>

                    <dd class="col-md-6">
                        @Html.ActionLink("Назад", "Index", "Home", null, htmlAttributes: new { @class = "btn btn-warning", @style = "min-width: 219px" })
                    </dd>
                </dl>
            }
            else
            {
                <div class="row"><br /></div>
                <div class="row"><br /></div>
                <dl class="row">
                    <dt class="col-md-6">
                        @Html.ActionLink("Скачать", "Download", new { fileId = Model.Id }, htmlAttributes: new { @class = "btn btn-success", @style = "min-width: 219px" })
                    </dt>

                    <dd class="col-md-6">
                        @Html.ActionLink("Назад", "Index", "File", null, htmlAttributes: new { @class = "btn btn-warning", @style = "min-width: 219px" })
                    </dd>
                </dl>
            }
        </div>
    </div>
</div>
